<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Xuanlabs – Passive Component Intelligence</title>
    <!-- Inter Font for high readability -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-body: #f8f9fa;
            --bg-card: #ffffff;
            --border-color: #e5e7eb;
            --text-main: #111827;
            --text-secondary: #6b7280;
            --text-muted: #9ca3af;
            --primary: #2563eb;
            --primary-dark: #1d4ed8;
            
            /* Status Colors */
            --status-safe-bg: #ecfdf5;
            --status-safe-text: #065f46;
            --status-safe-border: #a7f3d0;
            
            --status-warn-bg: #fffbeb;
            --status-warn-text: #92400e;
            --status-warn-border: #fde68a;
            
            --status-risk-bg: #fef2f2;
            --status-risk-text: #991b1b;
            --status-risk-border: #fecaca;

            --mono-font: 'JetBrains Mono', monospace;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Inter', -apple-system, sans-serif;
            background-color: var(--bg-body);
            color: var(--text-main);
            line-height: 1.5;
            -webkit-font-smoothing: antialiased;
        }

        /* --- Layout --- */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        /* --- Header & Controls --- */
        header {
            background: var(--bg-card);
            border-bottom: 1px solid var(--border-color);
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
        }

        .header-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 2rem;
        }

        .brand {
            display: flex;
            flex-direction: column;
        }

        .brand h1 {
            font-size: 1.25rem;
            font-weight: 700;
            letter-spacing: -0.025em;
            color: var(--text-main);
        }

        .brand span {
            font-size: 0.75rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .controls {
            display: flex;
            gap: 0.75rem;
            flex: 1;
            max-width: 900px;
        }

        .search-wrapper {
            position: relative;
            flex: 2;
        }

        input[type="text"] {
            width: 100%;
            padding: 0.625rem 1rem;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            font-size: 0.875rem;
            outline: none;
            transition: border-color 0.2s;
        }

        input[type="text"]:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        .control-group {
            display: flex;
            align-items: center;
            background: var(--bg-body);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            padding: 0.25rem;
        }

        .control-group label {
            font-size: 0.75rem;
            font-weight: 600;
            padding: 0 0.75rem;
            color: var(--text-secondary);
        }

        select {
            padding: 0.375rem 0.5rem;
            border: none;
            background: transparent;
            font-size: 0.875rem;
            font-weight: 500;
            cursor: pointer;
            outline: none;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
            border: none;
            padding: 0.625rem 1.25rem;
            border-radius: 6px;
            font-weight: 600;
            font-size: 0.875rem;
            cursor: pointer;
            transition: background 0.2s;
        }

        .btn-primary:hover {
            background: var(--primary-dark);
        }

        /* --- Results Grid --- */
        .results-info {
            margin: 2rem 0 1rem;
            display: flex;
            justify-content: space-between;
            align-items: baseline;
        }

        .results-info h2 {
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-secondary);
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(400px, 1fr));
            gap: 1.5rem;
            margin-bottom: 4rem;
        }

        /* --- Component Card --- */
        .card {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 1.25rem;
            display: flex;
            flex-direction: column;
            gap: 1.25rem;
            transition: transform 0.1s, box-shadow 0.1s;
        }

        .card:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
        }

        .mpn-block {
            display: flex;
            flex-direction: column;
        }

        .mpn {
            font-family: var(--mono-font);
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-main);
        }

        .manufacturer {
            font-size: 0.8125rem;
            color: var(--text-secondary);
        }

        .badge {
            font-size: 0.7rem;
            font-weight: 700;
            text-transform: uppercase;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            border: 1px solid transparent;
        }

        .badge-safe { background: var(--status-safe-bg); color: var(--status-safe-text); border-color: var(--status-safe-border); }
        .badge-warn { background: var(--status-warn-bg); color: var(--status-warn-text); border-color: var(--status-warn-border); }
        .badge-risk { background: var(--status-risk-bg); color: var(--status-risk-text); border-color: var(--status-risk-border); }

        /* Specs Section */
        .specs-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 0.75rem;
            background: #fafafa;
            padding: 0.75rem;
            border-radius: 6px;
        }

        .spec-item {
            display: flex;
            flex-direction: column;
        }

        .spec-label {
            font-size: 0.65rem;
            font-weight: 600;
            color: var(--text-muted);
            text-transform: uppercase;
        }

        .spec-value {
            font-size: 0.8125rem;
            font-weight: 600;
            color: var(--text-main);
        }

        /* Pricing Section */
        .pricing-section {
            display: flex;
            align-items: flex-end;
            justify-content: space-between;
            border-top: 1px solid var(--border-color);
            padding-top: 1rem;
        }

        .unit-price-block {
            display: flex;
            flex-direction: column;
        }

        .unit-price {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text-main);
            letter-spacing: -0.02em;
        }

        .price-label {
            font-size: 0.75rem;
            color: var(--text-secondary);
        }

        .savings {
            color: var(--status-safe-text);
            font-weight: 600;
            font-size: 0.8125rem;
        }

        .bulk-price {
            font-size: 0.75rem;
            color: var(--text-secondary);
            text-align: right;
        }

        /* Procurement footer */
        .card-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .stock {
            font-size: 0.8125rem;
            font-weight: 500;
        }

        .stock.in-stock { color: var(--status-safe-text); }
        .stock.low-stock { color: var(--status-warn-text); }

        .datasheet-link {
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--primary);
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }

        .datasheet-link:hover {
            text-decoration: underline;
        }

        /* Empty / Loading States */
        #loading-state, #empty-state {
            padding: 4rem 2rem;
            text-align: center;
            color: var(--text-secondary);
        }

        .hidden { display: none; }

        @media (max-width: 768px) {
            .header-content { flex-direction: column; align-items: stretch; }
            .controls { flex-direction: column; }
            .grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>

<header>
    <div class="container header-content">
        <div class="brand">
            <h1>Xuanlabs</h1>
            <span>Passive Component Intelligence</span>
        </div>

        <div class="controls">
            <div class="search-wrapper">
                <input type="text" id="searchInput" placeholder="Enter MPN or description (e.g. 10uF 16V 0603)...">
            </div>
            
            <div class="control-group">
                <label>QTY</label>
                <select id="qtySelect">
                    <option value="1">1</option>
                    <option value="100">100</option>
                    <option value="1000">1,000</option>
                </select>
            </div>

            <div class="control-group">
                <label>SORT</label>
                <select id="sortSelect">
                    <option value="match">Engineering Match</option>
                    <option value="price_asc">Price: Low to High</option>
                    <option value="price_desc">Price: High to Low</option>
                </select>
            </div>

            <button class="btn-primary" onclick="handleSearch()">Search</button>
        </div>
    </div>
</header>

<main class="container">
    <div id="results-meta" class="results-info hidden">
        <h2>Replacement Recommendations for <span id="target-mpn" style="color: var(--primary); font-family: var(--mono-font);"></span></h2>
        <span id="result-count" style="font-size: 0.875rem; color: var(--text-muted);"></span>
    </div>

    <div id="loading-state" class="hidden">
        <p>Analyzing component ecosystem and calculating safety scores...</p>
    </div>

    <div id="empty-state">
        <div style="max-width: 500px; margin: 0 auto; padding-top: 4rem;">
            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" style="color: var(--text-muted); margin-bottom: 1rem;">
                <path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
            </svg>
            <h3 style="margin-bottom: 0.5rem;">Ready for analysis</h3>
            <p>Enter a Manufacturer Part Number or electrical specifications to find safe, cost-optimized drop-in replacements.</p>
        </div>
    </div>

    <div id="results-grid" class="grid">
        <!-- JS Injection point -->
    </div>
</main>

<script>
    // Mock Database representing Mouser API JSON Structure
    const MOCK_DATA = [
        {
            id: "1",
            mpn: "GRM188R71C105KA12D",
            manufacturer: "Murata Electronics",
            datasheet: "#",
            stock: 45200,
            specs: {
                capacitance: "1 µF",
                voltage: "16 V",
                dielectric: "X7R",
                case: "0603",
                tolerance: "±10%",
                temp: "-55°C to +125°C"
            },
            prices: { 1: 0.12, 100: 0.08, 1000: 0.045 },
            score: 98,
            status: "Best drop-in",
            savings: 0 // Reference part
        },
        {
            id: "2",
            mpn: "CL10B105KO8NNNC",
            manufacturer: "Samsung Electro-Mechanics",
            datasheet: "#",
            stock: 125000,
            specs: {
                capacitance: "1 µF",
                voltage: "16 V",
                dielectric: "X7R",
                case: "0603",
                tolerance: "±10%",
                temp: "-55°C to +125°C"
            },
            prices: { 1: 0.08, 100: 0.04, 1000: 0.012 },
            score: 95,
            status: "Cheapest safe",
            savings: 0.033
        },
        {
            id: "3",
            mpn: "C0603C105K4RACTU",
            manufacturer: "KEMET",
            datasheet: "#",
            stock: 1200,
            specs: {
                capacitance: "1 µF",
                voltage: "16 V",
                dielectric: "X7R",
                case: "0603",
                tolerance: "±10%",
                temp: "-55°C to +125°C"
            },
            prices: { 1: 0.15, 100: 0.10, 1000: 0.07 },
            score: 90,
            status: "Good alternative",
            savings: -0.025
        },
        {
            id: "4",
            mpn: "VJ0603Y105KXJCW1BC",
            manufacturer: "Vishay Vitramon",
            datasheet: "#",
            stock: 850,
            specs: {
                capacitance: "1 µF",
                voltage: "16 V",
                dielectric: "X5R",
                case: "0603",
                tolerance: "±10%",
                temp: "-55°C to +85°C"
            },
            prices: { 1: 0.11, 100: 0.07, 1000: 0.04 },
            score: 65,
            status: "Risky replacement",
            savings: 0.005
        }
    ];

    let currentResults = [];
    const searchInput = document.getElementById('searchInput');
    const qtySelect = document.getElementById('qtySelect');
    const sortSelect = document.getElementById('sortSelect');
    const grid = document.getElementById('results-grid');
    const loadingState = document.getElementById('loading-state');
    const emptyState = document.getElementById('empty-state');
    const resultsMeta = document.getElementById('results-meta');
    const targetMpnDisplay = document.getElementById('target-mpn');

    function formatCurrency(num) {
        return new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD', minimumFractionDigits: 3 }).format(num);
    }

    function getBadgeClass(status) {
        if (status.includes("Best") || status.includes("Cheapest")) return "badge-safe";
        if (status.includes("Good")) return "badge-warn";
        return "badge-risk";
    }

    function renderResults() {
        const qty = parseInt(qtySelect.value);
        const sort = sortSelect.value;

        // Clone and sort
        let sortedData = [...currentResults];
        if (sort === 'price_asc') {
            sortedData.sort((a, b) => a.prices[qty] - b.prices[qty]);
        } else if (sort === 'price_desc') {
            sortedData.sort((a, b) => b.prices[qty] - a.prices[qty]);
        } else {
            sortedData.sort((a, b) => b.score - a.score);
        }

        grid.innerHTML = '';
        sortedData.forEach(item => {
            const price = item.prices[qty];
            const bulkPrice = item.prices[1000];
            const badgeClass = getBadgeClass(item.status);

            const card = document.createElement('div');
            card.className = 'card';
            card.innerHTML = `
                <div class="card-header">
                    <div class="mpn-block">
                        <span class="mpn">${item.mpn}</span>
                        <span class="manufacturer">${item.manufacturer}</span>
                    </div>
                    <span class="badge ${badgeClass}">${item.status}</span>
                </div>

                <div class="specs-grid">
                    <div class="spec-item"><span class="spec-label">Cap</span><span class="spec-value">${item.specs.capacitance}</span></div>
                    <div class="spec-item"><span class="spec-label">Volt</span><span class="spec-value">${item.specs.voltage}</span></div>
                    <div class="spec-item"><span class="spec-label">Diel</span><span class="spec-value">${item.specs.dielectric}</span></div>
                    <div class="spec-item"><span class="spec-label">Case</span><span class="spec-value">${item.specs.case}</span></div>
                    <div class="spec-item"><span class="spec-label">Tol</span><span class="spec-value">${item.specs.tolerance}</span></div>
                    <div class="spec-item"><span class="spec-label">Temp</span><span class="spec-value">${item.specs.temp}</span></div>
                </div>

                <div class="pricing-section">
                    <div class="unit-price-block">
                        <span class="price-label">Unit Price (Qty ${qty})</span>
                        <span class="unit-price">${formatCurrency(price)}</span>
                        ${item.savings > 0 ? `<span class="savings">Save ${formatCurrency(item.savings)} / unit</span>` : ''}
                    </div>
                    <div class="bulk-price">
                        <div>Best Bulk Price</div>
                        <div style="font-weight: 700; color: var(--text-main); font-size: 0.875rem;">${formatCurrency(bulkPrice)}</div>
                        <div style="font-size: 0.65rem; color: var(--text-muted);">AT QTY 1,000</div>
                    </div>
                </div>

                <div class="card-footer">
                    <span class="stock ${item.stock > 1000 ? 'in-stock' : 'low-stock'}">
                        ${item.stock.toLocaleString()} units available
                    </span>
                    <a href="${item.datasheet}" target="_blank" class="datasheet-link">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>
                        Datasheet
                    </a>
                </div>
            `;
            grid.appendChild(card);
        });
    }

    function handleSearch() {
        const query = searchInput.value.trim();
        if (!query) return;

        // Reset UI
        emptyState.classList.add('hidden');
        resultsMeta.classList.add('hidden');
        grid.innerHTML = '';
        loadingState.classList.remove('hidden');

        // Simulate API Delay
        setTimeout(() => {
            loadingState.classList.add('hidden');
            
            // Logic: In a real app, this would be a fetch()
            // For this demo, we use the mock data.
            currentResults = MOCK_DATA;
            
            resultsMeta.classList.remove('hidden');
            targetMpnDisplay.textContent = query.toUpperCase();
            document.getElementById('result-count').textContent = `${currentResults.length} alternatives identified`;
            
            renderResults();
        }, 800);
    }

    // Listeners for instant UI updates
    qtySelect.addEventListener('change', renderResults);
    sortSelect.addEventListener('change', renderResults);
    
    // Support Enter Key
    searchInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') handleSearch();
    });
</script>

</body>
</html>